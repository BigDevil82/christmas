项目目标
扮演一位精通 React、Three.js (R3F) 和 WebGL 交互设计的专家级前端工程师，构建一个 3D 互动圣诞树网页应用 。

1. 技术栈 (Tech Stack)
核心框架: React 18, 3D引擎使用 Three.js, @react-three/fiber, @react-three/drei 。
动画库: GSAP (用于复杂的过渡动画) 。
状态管理: Zustand (用于管理场景阶段、手势状态、相机目标) 。
样式: Tailwind CSS (用于 UI 界面) 。
视觉算法: @mediapipe/tasks-vision (用于手势识别) 。
后期处理: @react-three/postprocessing (实现 Bloom 辉光, Vignette 晕影效果) 。
构建工具: Webpack (配置 babel-loader, css-loader, postcss-loader) 。

2. 核心场景 (Scene)
环境: 深邃黑色背景，点缀动态星星 (Stars) 和闪烁粒子 (Sparkles) 。
光照:
暖色主光 (Warm PointLight) 照亮树体 。
冷色补光 (Cool PointLight) 增加边缘层次 。
顶部聚光灯 (SpotLight) 营造神圣感 。
使用 HDR 环境贴图 (如 Shanghai Bund) 增强金属反射质感 。
后期特效: 启用 Bloom 让星星和装饰发光，启用 Vignette 聚焦视线 。

3. 核心功能与交互阶段 (Phases)
项目包含四个主要阶段，通过 Zustand 管理流转 ：
A. 树形态 (Phase: 'tree')
粒子系统: 使用 instancedMesh 生成约 5000+ 个绿色粒子组成的圆锥体圣诞树 。
装饰物: 螺旋分布的装饰球（5种 PBR 材质颜色：复古金、酒红、灰蓝、玫瑰粉、香槟色），顶部发光星星，以及悬浮的白色发光雪花 。
交互效果:
水波纹斥力: 鼠标悬停或触摸时，粒子和装饰物产生斥力散开，移开后复原 。
手势触发: 识别到“五指张开 (Open Palm)”手势时，触发炸开动画进入下一阶段 。
B. 炸开过渡 (Phase: 'blooming')
使用 GSAP 动画，让所有粒子、装饰物和隐藏照片从中心向外爆炸扩散，随后自动进入星云阶段 。
C. 星云/照片墙形态 (Phase: 'nebula')
布局: 元素扩散形成巨大的环形星云 。
照片墙: 24 张拍立得风格照片悬浮在环形轨道上 。
智能适配: 自动检测宽高比，若是横版照片自动旋转相框 90 度 。
交互:
支持“五指张开”手势左右滑动控制照片环旋转（翻页）。
点击照片可平滑推进聚焦 。
识别到“握拳 (Closed Fist)”手势触发收缩动画 。
D. 收缩复原 (Phase: 'collapsing')
所有粒子和照片通过 GSAP 平滑收缩回圆锥体，重置为 'tree' 阶段 。
4. 手势控制 (HandTracker)
集成 MediaPipe HandLandmarker 。
界面: 右上角玻璃拟态风格面板显示摄像头预览，提供开关按钮 。
手势定义:
Open Palm: 触发炸开 / 左右翻页 。
Closed Fist: 触发重置复原 。

5. UI 界面设计
风格: 极简主义，玻璃拟态 (Glassmorphism)，节日氛围 。
标题: 屏幕中央显示巨大的金色发光 Cursive 字体 "Merry Christmas" 。
状态提示: 左上角显示手势状态和指引 。
音乐播放器: 底部居中，播放 "Merry Christmas Mr. Lawrence"，含旋转冰晶雪花图标、滚动歌名及呼吸灯效 。

6. 资源素材
预留照片链接和 BGM 链接的位置 。

7. 代码结构要求
src/components/ChristmasTree.jsx: 核心 3D 逻辑（粒子、材质、GSAP、斥力）。
src/components/Scene.jsx: 场景容器、灯光、相机、后期处理 。
src/components/HandTracker.jsx: 摄像头与 MediaPipe 逻辑 。
src/components/UI.jsx: 2D 界面层 。
src/store.js: Zustand 状态定义 。
src/utils/geometry.js: 数学计算辅助函数（圆锥、点云）。

最终指令: 基于以上需求生成完整的项目代码 。